[tox]
envlist = py313, py314, lint, typing
skip_missing_interpreters = True

[gh-actions]
python =
    3.13: py313, lint, typing
    3.14: py314, lint, typing

[testenv]
deps =
    pytest
    pytest-asyncio
    pytest-homeassistant-custom-component
    PyTurboJPEG
commands =
    pytest {posargs} tests

[testenv:lint]
basepython = {env:PYTHON3_PATH:python3}
deps =
    ruff
commands =
    ruff check custom_components tests
    ruff format --check custom_components tests

[testenv:typing]
basepython = {env:PYTHON3_PATH:python3}
deps =
    mypy
    types-requests
    homeassistant-stubs
    zm-py==0.5.5
commands =
    mypy custom_components/zoneminder
