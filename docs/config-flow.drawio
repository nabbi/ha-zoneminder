<mxfile host="Electron" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/26.2.2 Chrome/134.0.6998.178 Electron/35.1.2 Safari/537.36" version="26.2.2">
  <diagram id="cfdiag" name="Config &amp; Options Flow">
    <mxGraphModel dx="1839" dy="1610" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="1800" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="&lt;b&gt;ha-zoneminder &amp;mdash; Config &amp;amp; Options Flow&lt;/b&gt;" style="text;html=1;fontSize=20;fontFamily=Helvetica;align=center;verticalAlign=middle;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="200" y="-40" width="600" height="30" as="geometry" />
        </mxCell>
        <mxCell id="subtitle" value="ZoneMinderConfigFlow (VERSION = 1) &amp;nbsp;|&amp;nbsp; ZoneMinderOptionsFlow" style="text;html=1;fontSize=11;fontFamily=Helvetica;align=center;verticalAlign=middle;fontColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="200" y="-12" width="600" height="20" as="geometry" />
        </mxCell>
        <mxCell id="cf_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2;container=0;collapsible=0;" parent="1" vertex="1">
          <mxGeometry x="-150" y="20" width="770" height="620" as="geometry" />
        </mxCell>
        <mxCell id="of_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;container=0;collapsible=0;" parent="1" vertex="1">
          <mxGeometry x="650" y="20" width="460" height="620" as="geometry" />
        </mxCell>
        <mxCell id="legend_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#CCCCCC;container=1;collapsible=0;" parent="1" vertex="1">
          <mxGeometry x="310" y="660" width="380" height="80" as="geometry" />
        </mxCell>
        <mxCell id="leg_title" value="&lt;b&gt;Legend&lt;/b&gt;" style="text;html=1;fontSize=10;fontColor=#333;align=left;" parent="legend_box" vertex="1">
          <mxGeometry x="10" y="5" width="50" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg1" value="Entry point / result" style="text;html=1;fontSize=9;align=left;" parent="legend_box" vertex="1">
          <mxGeometry x="35" y="22" width="120" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg1s" value="" style="ellipse;fillColor=#E2EFDA;strokeColor=#82b366;" parent="legend_box" vertex="1">
          <mxGeometry x="12" y="22" width="18" height="14" as="geometry" />
        </mxCell>
        <mxCell id="leg2" value="Step / action" style="text;html=1;fontSize=9;align=left;" parent="legend_box" vertex="1">
          <mxGeometry x="35" y="40" width="100" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg2s" value="" style="rounded=1;fillColor=#FFFFFF;strokeColor=#6c8ebf;" parent="legend_box" vertex="1">
          <mxGeometry x="12" y="40" width="18" height="14" as="geometry" />
        </mxCell>
        <mxCell id="leg3" value="Decision / validation" style="text;html=1;fontSize=9;align=left;" parent="legend_box" vertex="1">
          <mxGeometry x="35" y="58" width="120" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg3s" value="" style="rhombus;fillColor=#fff2cc;strokeColor=#d6b656;" parent="legend_box" vertex="1">
          <mxGeometry x="10" y="56" width="20" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg4" value="Error state" style="text;html=1;fontSize=9;align=left;" parent="legend_box" vertex="1">
          <mxGeometry x="200" y="22" width="80" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg4s" value="" style="rounded=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="legend_box" vertex="1">
          <mxGeometry x="178" y="22" width="18" height="14" as="geometry" />
        </mxCell>
        <mxCell id="leg5" value="Version-conditional" style="text;html=1;fontSize=9;align=left;" parent="legend_box" vertex="1">
          <mxGeometry x="200" y="40" width="120" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg5s" value="" style="rounded=1;fillColor=#FFFFFF;strokeColor=#b85450;dashed=1;dashPattern=8 4;" parent="legend_box" vertex="1">
          <mxGeometry x="178" y="40" width="18" height="14" as="geometry" />
        </mxCell>
        <mxCell id="leg6" value="Triggers reload" style="text;html=1;fontSize=9;align=left;" parent="legend_box" vertex="1">
          <mxGeometry x="200" y="58" width="100" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg6s" value="" style="rounded=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="legend_box" vertex="1">
          <mxGeometry x="178" y="58" width="18" height="14" as="geometry" />
        </mxCell>
        <mxCell id="of_label" value="&lt;b&gt;OptionsFlow&lt;/b&gt; &amp;nbsp; (config_flow.py)" style="text;html=1;fontSize=14;fontColor=#333333;align=left;" parent="1" vertex="1">
          <mxGeometry x="690" y="25" width="300" height="25" as="geometry" />
        </mxCell>
        <mxCell id="opt_start" value="User clicks&lt;br&gt;Configure" style="ellipse;whiteSpace=wrap;html=1;fontSize=10;fillColor=#E2EFDA;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="780" y="65" width="120" height="45" as="geometry" />
        </mxCell>
        <mxCell id="opt_init" value="&lt;b&gt;async_step_init&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#FFFFFF;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="780" y="135" width="120" height="35" as="geometry" />
        </mxCell>
        <mxCell id="opt_version" value="&lt;b&gt;_get_zm_version&lt;/b&gt;&lt;br&gt;Check running ZM version&lt;br&gt;from coordinator data" style="rhombus;whiteSpace=wrap;html=1;fontSize=9;fontColor=#666666;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="765" y="195" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="opt_common_label" value="&lt;b&gt;Always shown:&lt;/b&gt;" style="text;html=1;fontSize=10;fontColor=#333;align=left;" parent="1" vertex="1">
          <mxGeometry x="680" y="290" width="120" height="18" as="geometry" />
        </mxCell>
        <mxCell id="opt_common" value="&lt;b&gt;include_archived&lt;/b&gt; &amp;mdash; bool&lt;br&gt;&lt;b&gt;monitored_conditions&lt;/b&gt; &amp;mdash; multi-select&lt;br&gt;&amp;nbsp;&amp;nbsp;[all, hour, day, week, month]&lt;br&gt;&lt;b&gt;stream_scale&lt;/b&gt; &amp;mdash; number (1&amp;ndash;100)&lt;br&gt;&lt;b&gt;stream_maxfps&lt;/b&gt; &amp;mdash; number (0.5&amp;ndash;30.0)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#82b366;align=left;spacingLeft=8;" parent="1" vertex="1">
          <mxGeometry x="680" y="310" width="230" height="80" as="geometry" />
        </mxCell>
        <mxCell id="opt_legacy_label" value="&lt;b&gt;ZM &amp;lt; 1.37 only:&lt;/b&gt;" style="text;html=1;fontSize=10;fontColor=#b85450;align=left;" parent="1" vertex="1">
          <mxGeometry x="870" y="398" width="120" height="18" as="geometry" />
        </mxCell>
        <mxCell id="opt_legacy" value="&lt;b&gt;command_on&lt;/b&gt; &amp;mdash; text (default: Modect)&lt;br&gt;&lt;b&gt;command_off&lt;/b&gt; &amp;mdash; text (default: Monitor)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#b85450;dashed=1;dashPattern=8 4;align=left;spacingLeft=8;" parent="1" vertex="1">
          <mxGeometry x="870" y="418" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="opt_save" value="&lt;b&gt;async_create_entry&lt;/b&gt;&lt;br&gt;Save options" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#666666;fillColor=#E2EFDA;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="780" y="495" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="opt_reload" value="&lt;b&gt;_async_options_updated&lt;/b&gt;&lt;br&gt;Trigger full entry reload&lt;br&gt;(async_reload)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#666666;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="765" y="560" width="150" height="50" as="geometry" />
        </mxCell>
        <mxCell id="eo1" style="rounded=0;endArrow=classic;endFill=1;strokeColor=#82b366;" parent="1" source="opt_start" target="opt_init" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eo2" style="rounded=0;endArrow=classic;endFill=1;strokeColor=#82b366;" parent="1" source="opt_init" target="opt_version" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eo3" value="always" style="rounded=0;endArrow=classic;endFill=1;strokeColor=#82b366;fontSize=9;fontColor=#228B22;entryX=0.697;entryY=0.035;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="opt_version" target="opt_common" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eo4" value="&lt; 1.37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=classic;endFill=1;strokeColor=#b85450;fontSize=9;fontColor=#b85450;dashed=1;dashPattern=8 4;exitX=0.97;exitY=0.501;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitPerimeter=0;" parent="1" source="opt_version" target="opt_legacy" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="970" y="230" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="eo5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=classic;endFill=1;strokeColor=#82b366;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.33;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="opt_common" target="opt_save" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eo5b" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=classic;endFill=1;strokeColor=#b85450;dashed=1;dashPattern=8 4;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.67;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="opt_legacy" target="opt_save" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eo6" style="rounded=0;endArrow=classic;endFill=1;strokeColor=#82b366;" parent="1" source="opt_save" target="opt_reload" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cf_label" value="&lt;b&gt;ConfigFlow&lt;/b&gt; &amp;nbsp; (config_flow.py)" style="text;html=1;fontSize=14;fontColor=#333333;align=left;" parent="1" vertex="1">
          <mxGeometry x="-80" y="30" width="300" height="25" as="geometry" />
        </mxCell>
        <mxCell id="user_label" value="&lt;b&gt;User Setup&lt;/b&gt;" style="text;html=1;fontSize=11;fontColor=#4472C4;fontStyle=5;align=center;" parent="1" vertex="1">
          <mxGeometry x="-65" y="55" width="250" height="18" as="geometry" />
        </mxCell>
        <mxCell id="user_start" value="User adds&lt;br&gt;integration" style="ellipse;whiteSpace=wrap;html=1;fontSize=10;fillColor=#E2EFDA;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry y="78" width="120" height="45" as="geometry" />
        </mxCell>
        <mxCell id="user_form" value="&lt;b&gt;async_step_user&lt;/b&gt;&lt;br&gt;Show USER_DATA_SCHEMA form&lt;br&gt;host, username, password, ssl,&lt;br&gt;path, path_zms, verify_ssl" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#666666;fillColor=#FFFFFF;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-45" y="143" width="210" height="65" as="geometry" />
        </mxCell>
        <mxCell id="user_validate" value="&lt;b&gt;_async_validate_connection&lt;/b&gt;&lt;br&gt;ZoneMinder(&amp;hellip;).login()" style="rhombus;whiteSpace=wrap;html=1;fontSize=9;fontColor=#666666;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-30" y="230" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="user_entry" value="&lt;b&gt;async_create_entry&lt;/b&gt;&lt;br&gt;title = host&lt;br&gt;data = connection params&lt;br&gt;options = defaults" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#666666;fillColor=#E2EFDA;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="-30" y="340" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="user_error" value="Show form with error&lt;br&gt;&lt;b&gt;cannot_connect&lt;/b&gt;&lt;br&gt;&lt;b&gt;invalid_auth&lt;/b&gt;&lt;br&gt;&lt;b&gt;unknown&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="-130" y="425" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eu1" style="rounded=0;endArrow=classic;endFill=1;strokeColor=#6c8ebf;" parent="1" source="user_start" target="user_form" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eu2" style="rounded=0;endArrow=classic;endFill=1;strokeColor=#6c8ebf;" parent="1" source="user_form" target="user_validate" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eu3" value="OK" style="rounded=0;endArrow=classic;endFill=1;strokeColor=#82b366;fontSize=9;fontColor=#228B22;" parent="1" source="user_validate" target="user_entry" edge="1">
          <mxGeometry x="0.1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="eu4" value="Error" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=classic;endFill=1;strokeColor=#b85450;fontSize=9;fontColor=#CC0000;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="user_validate" target="user_error" edge="1">
          <mxGeometry x="-0.3846" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="eu5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=classic;endFill=1;strokeColor=#b85450;dashed=1;dashPattern=8 4;exitX=0.231;exitY=0.017;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitPerimeter=0;" parent="1" source="user_error" target="user_form" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-100" y="176" />
              <mxPoint x="-80" y="176" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="import_label" value="&lt;b&gt;YAML Import&lt;/b&gt;" style="text;html=1;fontSize=11;fontColor=#4472C4;fontStyle=5;align=center;" parent="1" vertex="1">
          <mxGeometry x="205" y="55" width="130" height="18" as="geometry" />
        </mxCell>
        <mxCell id="import_start" value="async_setup()&lt;br&gt;YAML detected" style="ellipse;whiteSpace=wrap;html=1;fontSize=9;fontColor=#666666;fillColor=#E2EFDA;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="205" y="78" width="130" height="45" as="geometry" />
        </mxCell>
        <mxCell id="import_step" value="&lt;b&gt;async_step_import&lt;/b&gt;&lt;br&gt;set unique_id(host)&lt;br&gt;abort if already configured" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#666666;fillColor=#FFFFFF;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="200" y="143" width="140" height="65" as="geometry" />
        </mxCell>
        <mxCell id="import_validate" value="&lt;b&gt;validate&lt;/b&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="220" y="235" width="100" height="55" as="geometry" />
        </mxCell>
        <mxCell id="import_entry" value="&lt;b&gt;create_entry&lt;/b&gt;&lt;br&gt;+ repair notification" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#666666;fillColor=#E2EFDA;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="205" y="325" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="import_abort" value="&lt;b&gt;abort&lt;/b&gt;&lt;br&gt;(error reason)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="185" y="418" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ei1" style="rounded=0;endArrow=classic;endFill=1;strokeColor=#6c8ebf;" parent="1" source="import_start" target="import_step" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ei2" style="rounded=0;endArrow=classic;endFill=1;strokeColor=#6c8ebf;" parent="1" source="import_step" target="import_validate" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ei3" value="OK" style="rounded=0;endArrow=classic;endFill=1;strokeColor=#82b366;fontSize=9;fontColor=#228B22;" parent="1" source="import_validate" target="import_entry" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei4" value="Error" style="rounded=0;endArrow=classic;endFill=1;strokeColor=#b85450;fontSize=9;fontColor=#CC0000;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.093;entryY=0.04;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;entryPerimeter=0;" parent="1" source="import_validate" target="import_abort" edge="1">
          <mxGeometry x="-0.3022" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="reconf_label" value="&lt;b&gt;Reconfigure&lt;/b&gt;" style="text;html=1;fontSize=11;fontColor=#4472C4;fontStyle=5;align=center;" parent="1" vertex="1">
          <mxGeometry x="403" y="55" width="140" height="18" as="geometry" />
        </mxCell>
        <mxCell id="reconf_start" value="User clicks&lt;br&gt;Reconfigure" style="ellipse;whiteSpace=wrap;html=1;fontSize=10;fillColor=#E2EFDA;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="415" y="78" width="120" height="45" as="geometry" />
        </mxCell>
        <mxCell id="reconf_form" value="&lt;b&gt;async_step_reconfigure&lt;/b&gt;&lt;br&gt;Pre-filled form from&lt;br&gt;current entry data" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#666666;fillColor=#FFFFFF;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="400" y="143" width="150" height="65" as="geometry" />
        </mxCell>
        <mxCell id="reconf_validate" value="&lt;b&gt;validate&lt;/b&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="425" y="235" width="100" height="55" as="geometry" />
        </mxCell>
        <mxCell id="reconf_done" value="&lt;b&gt;update_reload&lt;/b&gt;&lt;br&gt;Update entry data&lt;br&gt;and reload integration" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#666666;fillColor=#E2EFDA;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="410" y="325" width="130" height="55" as="geometry" />
        </mxCell>
        <mxCell id="reconf_error" value="Show form&lt;br&gt;with error" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="540" y="423" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="er1" style="rounded=0;endArrow=classic;endFill=1;strokeColor=#6c8ebf;" parent="1" source="reconf_start" target="reconf_form" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="437" y="123" as="sourcePoint" />
            <mxPoint x="437" y="143" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="er2" style="rounded=0;endArrow=classic;endFill=1;strokeColor=#6c8ebf;" parent="1" source="reconf_form" target="reconf_validate" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="437" y="208" as="sourcePoint" />
            <mxPoint x="437" y="235" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="er3" value="OK" style="rounded=0;endArrow=classic;endFill=1;strokeColor=#82b366;fontSize=9;fontColor=#228B22;" parent="1" source="reconf_validate" target="reconf_done" edge="1">
          <mxGeometry x="0.0068" relative="1" as="geometry">
            <mxPoint as="offset" />
            <mxPoint x="437" y="290" as="sourcePoint" />
            <mxPoint x="437" y="325" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="er4" value="Error" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=classic;endFill=1;strokeColor=#b85450;fontSize=9;fontColor=#CC0000;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.282;entryY=-0.025;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="reconf_validate" target="reconf_error" edge="1">
          <mxGeometry x="-0.3794" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="er5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=classic;endFill=1;strokeColor=#b85450;dashed=1;dashPattern=8 4;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="reconf_error" target="reconf_form" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="val_note" value="&lt;b&gt;_async_validate_connection&lt;/b&gt; is shared by all three paths.&lt;br&gt;Creates a ZoneMinder client, calls login(), catches LoginError / RequestException / ZoneminderError." style="text;html=1;fontSize=9;fontColor=#666666;align=left;" parent="1" vertex="1">
          <mxGeometry x="-70" y="500" width="560" height="30" as="geometry" />
        </mxCell>
        <mxCell id="opts_note" value="&lt;b&gt;Default options&lt;/b&gt; set on entry creation (user &amp;amp; import paths):&lt;br&gt;include_archived=false &amp;nbsp;|&amp;nbsp; monitored_conditions=[all] &amp;nbsp;|&amp;nbsp; command_on=Modect &amp;nbsp;|&amp;nbsp; command_off=Monitor" style="text;html=1;fontSize=9;fontColor=#666666;align=left;" parent="1" vertex="1">
          <mxGeometry x="-70" y="535" width="560" height="30" as="geometry" />
        </mxCell>
        <mxCell id="uid_note" value="&lt;b&gt;unique_id&lt;/b&gt; = hostname &amp;mdash; prevents duplicate entries for the same server." style="text;html=1;fontSize=9;fontColor=#666666;align=left;" parent="1" vertex="1">
          <mxGeometry x="-70" y="570" width="400" height="18" as="geometry" />
        </mxCell>
        <mxCell id="setup_note" value="&lt;b&gt;async_setup_entry&lt;/b&gt;: login &amp;rarr; get_monitors &amp;rarr; create coordinator &amp;rarr; first_refresh &amp;rarr; forward platforms &amp;rarr; register services&lt;br&gt;Import path also creates a &lt;b&gt;repair notification&lt;/b&gt; (ir.async_create_issue) guiding YAML removal." style="text;html=1;fontSize=9;fontColor=#666666;align=left;" parent="1" vertex="1">
          <mxGeometry x="-70" y="595" width="560" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
